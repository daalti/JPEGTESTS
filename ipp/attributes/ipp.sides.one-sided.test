{
    # DELAY 20
    FILE $filename
    NAME "3.2.1: Print-Job Operation"
    OPERATION Print-Job

    GROUP operation-attributes-tag
    ATTR charset attributes-charset utf-8
    ATTR naturalLanguage attributes-natural-language en
    ATTR uri printer-uri $uri
    ATTR name requesting-user-name $user
    ATTR name job-name $filename
    ATTR name document-name $filename

    # COMPRESSION gzip
    # ATTR keyword compression gzip
    # ATTR boolean ipp-attribute-fidelity true

    # ATTR mimeMediaType document-format application/octet-stream- if file support it prints
    ATTR mimeMediaType document-format application/pdf
    # ATTR mimeMediaType document-format image/urf
    # ATTR mimeMediaType document-format image/jpeg
    # ATTR octetstring job-password "12345"
    # ATTR text document-format-version "ab.c"
    # ATTR uri requesting-user-uri http://hello

    GROUP job-attributes-tag
    # ATTR integer job_k_octets 1
    # ATTR integer job_impressions 1
    # ATTR integer job_media_sheets 1

    #ATTR rangeofinteger page-ranges 2-4
    # ATTR integer copies 10
    # ATTR enum orientation-requested 6      # portrait (3), landscape (4), reverse-landscape (5), reverse-portrait (6), none (7)
    ATTR Keyword sides one-sided            # one-sided, two-sided-long-edge, two-sided-short-edge
    # ATTR enum print-quality 5                     # draft, normal, high
    # ATTR keyword output-bin face-down
    # ATTR Keyword multiple-document-handling separate-documents-uncollated-copies          # separate-documents-collated-copies, separate-documents-uncollated-copies
    # ATTR keyword print-scaling fit              # auto, auto-fit, fill, fit, none
    # ATTR resolution printer-resolution 99x99dpi         # 300dpi, 600dpi
    # ATTR keyword print-color-mode color          # auto, auto-monochrome, color, process-monochrome
    # ATTR keyword output-mode monochrome                     # auto-monochrome, color, monochrome
    # ATTR keyword print-content-optimize auto          # graphics, photo, text, text-and-graphics
    # ATTR bool pdf-fit-to-page false
    # ATTR integer number_up 2                          # 1, 2, 4..
    # ATTR keyword print-rendering-intent auto          # auto, perceptual, relative, relative-bpc

    # ATTR keyword media-source tray-2                  # auto, tray-1, tray-2
    # ATTR keyword media-type cardstock                 # auto, stationery, cardstock...
    # ATTR keyword media "na_legal_8.5x14in"            # "iso_a4_210x297mm", "na_letter_8.5x11in"

     ATTR collection media-col  {
    #     MEMBER collection media-size {
    #         MEMBER integer x-dimension 21000
    #         MEMBER integer y-dimension 29700
    #     }
    #     # MEMBER keyword media-source tray-2
          MEMBER keyword media-size-name "na_letter_8.5x11in"  # "na_legal_8.5x14in", "na_letter_8.5x11in", "iso_a5_148x210mm", "iso_a4_210x297mm"
          # MEMBER keyword media-type com.hp.glossy-brochure.heavyweight                          # auto, stationery, cardstock...
    #     # MEMBER nameWithoutLanguage media-size-name "na_legal_8.5x14in"
    #     # MEMBER integer media-top-margin 423
    #     # MEMBER integer media-bottom-margin 423
    #     # MEMBER integer media-left-margin 423
    #     # MEMBER integer media-right-margin 423
    #     # MEMBER keyword media-source "tray-2"
    #     # MEMBER nameWithoutLanguage media-type cardstock    # cardstock, stationery
     }


    # ATTR collection finishings-col {
    #    MEMBER keyword finishing-template none
    # }

    STATUS successful-ok
    STATUS client-error-document-format-not-supported
    STATUS successful-ok-ignored-or-substituted-attributes
    EXPECT job-uri OF-TYPE uri COUNT 1 IN-GROUP job-attributes-tag
    EXPECT job-id OF-TYPE integer COUNT 1 IN-GROUP job-attributes-tag
           WITH-VALUE >0
    EXPECT job-state OF-TYPE enum COUNT 1 IN-GROUP job-attributes-tag
           WITH-VALUE 3,4,5,6,7,8,9
    EXPECT job-state-reasons OF-TYPE keyword IN-GROUP job-attributes-tag
    EXPECT ?job-state-message OF-TYPE text IN-GROUP job-attributes-tag
    EXPECT ?number-of-intervening-jobs OF-TYPE integer
           IN-GROUP job-attributes-tag WITH-VALUE >-1
}

{
    NAME "Wait For Print-Job To Complete."
    OPERATION Get-Job-Attributes
    GROUP operation-attributes-tag
    ATTR charset attributes-charset utf-8
    ATTR naturalLanguage attributes-natural-language en
    ATTR uri printer-uri $uri
    ATTR integer job-id $job-id
    ATTR name requesting-user-name $user
    ATTR keyword requested-attributes all
    # ATTR keyword requested-attributes job-id,job-uuid,job-uri,job-name,time-at-creation,time-at-completed,date-time-at-creation,date-time-at-completed,job-more-info,job-state,job-state-reasons,job-name,job-originating-user-name,job-media-sheets,job-media-sheets-completed,job-impressions,job-impressions-completed,job-originating-user-name,job-state,job-impression-completed

    STATUS successful-ok
    EXPECT job-state OF-TYPE enum WITH-VALUE >6 REPEAT-NO-MATCH REPEAT-LIMIT 300
    EXPECT job-state OF-TYPE enum WITH-VALUE 9
    EXPECT job-state-reasons OF-TYPE keyword IN-GROUP job-attributes-tag WITH-VALUE "job-completed-successfully"
}