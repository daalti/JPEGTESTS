## USAGE:  ./ipptool -f filename -t printer-uri time-at.test
##########################################################
{

	NAME "Step 3: Print-Job"


	OPERATION Print-Job
	GROUP operation-attributes-tag
	ATTR charset attributes-charset utf-8
	ATTR naturalLanguage attributes-natural-language en
	ATTR uri printer-uri $uri
	ATTR name requesting-user-name $user
	ATTR mimeMediaType document-format application/PCLm

	FILE $filename
    
	STATUS successful-ok
	EXPECT job-id OF-TYPE integer IN-GROUP job-attributes-tag WITH-VALUE >0

}
#############################################################
# Wait for step 3 to complete
# Wait until job pool is clear
{

    NAME "	Step 4: Wait for Step 3 to finish"

    OPERATION Get-Jobs

    GROUP operation-attributes-tag
    ATTR charset attributes-charset utf-8
    ATTR naturalLanguage attributes-natural-language en
    ATTR uri printer-uri $uri
    ATTR name requesting-user-name $user
    ATTR keyword which-jobs not-completed

    STATUS successful-ok
    EXPECT !job-id REPEAT-NO-MATCH
}

############################################################
{
	
	NAME "Step 5 : Validate that Get-Job-Attributes returns time-at attributes"


	OPERATION Get-Job-Attributes
	GROUP operation-attributes-tag
	ATTR charset attributes-charset utf-8
	ATTR naturalLanguage attributes-natural-language en
	ATTR uri printer-uri $uri
	ATTR integer job-id $job-id
	ATTR name requesting-user-name $user

	STATUS successful-ok
	EXPECT time-at-creation OF-TYPE integer
	EXPECT time-at-processing OF-TYPE integer
	EXPECT time-at-completed OF-TYPE integer

	# EXPECT ?date-time-at-creation OF-TYPE dateTime, no-value


	# EXPECT ?date-time-at-processing OF-TYPE dateTime, no-value


	#EXPECT ?date-time-at-completed OF-TYPE dateTime, no-value

}

	
