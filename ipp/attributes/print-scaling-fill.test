{
    # DELAY 20
    FILE $filename
    NAME "3.2.1: Print-Job Operation"
    OPERATION Print-Job
    GROUP operation-attributes-tag
    ATTR charset attributes-charset utf-8
    ATTR naturalLanguage attributes-natural-language en
    ATTR uri printer-uri $uri
    ATTR name requesting-user-name $user
    ATTR name job-name $filename
    ATTR name document-name $filename

    ATTR mimeMediaType document-format image/jpeg
   
    GROUP job-attributes-tag
    
    ATTR keyword print-scaling fill              # auto, auto-fit, fill, fit, none
    
    STATUS successful-ok
    STATUS client-error-document-format-not-supported
    STATUS successful-ok-ignored-or-substituted-attributes
    EXPECT job-uri OF-TYPE uri COUNT 1 IN-GROUP job-attributes-tag
    EXPECT job-id OF-TYPE integer COUNT 1 IN-GROUP job-attributes-tag
           WITH-VALUE >0
    EXPECT job-state OF-TYPE enum COUNT 1 IN-GROUP job-attributes-tag
           WITH-VALUE 3,4,5,6,7,8,9
    EXPECT job-state-reasons OF-TYPE keyword IN-GROUP job-attributes-tag
    EXPECT ?job-state-message OF-TYPE text IN-GROUP job-attributes-tag
    EXPECT ?number-of-intervening-jobs OF-TYPE integer
           IN-GROUP job-attributes-tag WITH-VALUE >-1
}

{
    NAME "Wait For Print-Job To Complete."
    OPERATION Get-Job-Attributes
    GROUP operation-attributes-tag
    ATTR charset attributes-charset utf-8
    ATTR naturalLanguage attributes-natural-language en
    ATTR uri printer-uri $uri
    ATTR integer job-id $job-id
    ATTR name requesting-user-name $user
    ATTR keyword requested-attributes all
    # ATTR keyword requested-attributes job-id,job-uuid,job-uri,job-name,time-at-creation,time-at-completed,date-time-at-creation,date-time-at-completed,job-more-info,job-state,job-state-reasons,job-name,job-originating-user-name,job-media-sheets,job-media-sheets-completed,job-impressions,job-impressions-completed,job-originating-user-name,job-state,job-impression-completed

    STATUS successful-ok
    EXPECT job-state OF-TYPE enum WITH-VALUE >6 REPEAT-NO-MATCH REPEAT-LIMIT 300
    EXPECT job-state OF-TYPE enum WITH-VALUE 9
    EXPECT job-state-reasons OF-TYPE keyword IN-GROUP job-attributes-tag WITH-VALUE "job-completed-successfully"
}
