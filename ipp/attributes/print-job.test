## USAGE:  ./ipptool -f filename -t printer-uri print-job.test

#############################################################
# Wait for printer to be ready
# Wait until job pool is clear
{
    NAME "Step 1:Wait for printer to be ready"
    OPERATION Get-Jobs

    GROUP operation-attributes-tag
    ATTR charset attributes-charset utf-8
    ATTR naturalLanguage attributes-natural-language en
    ATTR uri printer-uri $uri
    ATTR name requesting-user-name $user
    ATTR keyword which-jobs not-completed

    STATUS successful-ok
    EXPECT !job-id REPEAT-NO-MATCH
}
#############################################################
##Test case for no document-format listed in print-job##
{
	NAME "Step 2:print-job Information"
	OPERATION print-job
	GROUP operation-attributes-tag
	ATTR charset attributes-charset utf-8
	ATTR naturalLanguage attributes-natural-language en
	ATTR uri printer-uri $uri
	ATTR name requesting-user-name $user
	ATTR boolean ipp-attribute-fidelity false
	ATTR name job-name "Test-1"
	ATTR name document-name "doc-1-test"
	ATTR keyword compression "none"
	ATTR mimeMediaType document-format application/PCLm

	FILE $filename
    
	STATUS successful-ok
	EXPECT job-id OF-TYPE integer
	EXPECT job-uri OF-TYPE uri
 	EXPECT job-state OF-TYPE enum
	EXPECT job-state-reasons OF-Type keyword
}

{
DELAY 120

	NAME "Step 3:print-job empty job-attributes block"
	OPERATION print-job
	GROUP operation-attributes-tag
	ATTR charset attributes-charset utf-8
	ATTR naturalLanguage attributes-natural-language en
	ATTR uri printer-uri $uri
	ATTR name requesting-user-name $user
	ATTR boolean ipp-attribute-fidelity true
	ATTR name job-name "Test-2"
	ATTR name document-name "doc-1-test"
	ATTR keyword compression "none"
	ATTR mimeMediaType document-format application/PCLm

	GROUP job-attributes-tag

	FILE $filename
    
	STATUS successful-ok
	EXPECT attributes-charset OF-Type charset
	EXPECT attributes-natural-language OF-TYPE naturalLanguage
	EXPECT job-id OF-TYPE integer
	EXPECT job-uri Of-TYPE uri
 	EXPECT job-state OF-TYPE enum
 	EXPECT job-state-reasons OF-Type keyword

}
